<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IATRA - NEO Hazard Dashboard</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="orbital-bg"></div>
  <div class="app">
    <header class="topbar">
      <div>
        <p class="eyebrow">IATRA / Near-Earth Object Monitor</p>
        <h1>NEO Hazard Dashboard</h1>
      </div>
      <div class="top-actions">
        <div class="user-inline">
          <span class="meta-label">User</span>
          <span class="meta-value" id="userName">--</span>
          <button class="logout-button" id="logoutButton" type="button">Logout</button>
        </div>
        <button class="eye-button" id="openSimulation" type="button" aria-haspopup="dialog"
          aria-controls="simulationModal">
          View Asteroid
        </button>
        <div class="meta">
          <div class="meta-block">
            <span class="meta-label">Last Updated</span>
            <span class="meta-value" id="lastUpdated">--</span>
          </div>
          <div class="meta-block">
            <span class="meta-label">Source</span>
            <span class="meta-value">NASA NeoWS</span>
          </div>
        </div>
      </div>
    </header>

    <section class="stats" id="statsGrid">
      <article class="stat-card">
        <span class="stat-label">Objects Tracked</span>
        <span class="stat-value" id="statTotal">--</span>
        <span class="stat-sub">Detected in selected date range</span>
      </article>
      <article class="stat-card">
        <span class="stat-label">Potentially Hazardous</span>
        <span class="stat-value warning" id="statHazardous">--</span>
        <span class="stat-sub">Flagged by NASA</span>
      </article>
      <article class="stat-card">
        <span class="stat-label">Closest Pass</span>
        <span class="stat-value" id="statClosest">--</span>
        <span class="stat-sub">Minimum miss distance</span>
      </article>
      <article class="stat-card">
        <span class="stat-label">Largest Diameter</span>
        <span class="stat-value" id="statLargest">--</span>
        <span class="stat-sub">Max estimated size</span>
      </article>
    </section>

    <section class="tabs">
      <button class="tab-button active" data-tab="overview">Overview</button>
      <button class="tab-button" data-tab="recent">Recent Close Approaches</button>
      <button class="tab-button" data-tab="tracked">Tracked Objects</button>
    </section>

    <section class="tab-panels">
      <div class="tab-panel active" data-panel="overview">
        <section class="controls">
          <div class="control-group">
            <button class="chip active" data-filter="all">All Objects</button>
            <button class="chip" data-filter="hazardous">Hazardous Only</button>
            <button class="chip" data-filter="close">Close Pass (&lt; 1M km)</button>
          </div>
          <div class="control-group">
            <label class="date-range">
              <span>Start</span>
              <input id="startDate" type="date">
            </label>
            <label class="date-range">
              <span>End</span>
              <input id="endDate" type="date">
            </label>
            <button class="chip apply-range" id="applyRange" type="button">Apply Range</button>
          </div>
          <div class="control-group">
            <label class="search">
              <span>Search</span>
              <input id="searchInput" type="search" placeholder="Asteroid name or ID">
            </label>
          </div>
        </section>

        <section class="grid">
          <div class="grid-header">
            <h2>Object Detail Feed</h2>
            <p>Sorted by miss distance (closest first).</p>
          </div>
          <div id="neoGrid" class="neo-grid"></div>
        </section>
      </div>

      <div class="tab-panel" data-panel="recent">
        <section class="grid">
          <div class="grid-header">
            <h2>Recent Close Approaches</h2>
            <p>Close approach events across the selected date range.</p>
          </div>
          <div class="approach-list" id="closeApproachList"></div>
        </section>
      </div>

      <div class="tab-panel" data-panel="tracked">
        <section class="grid">
          <div class="grid-header">
            <h2>Tracked Objects</h2>
            <p>Your saved asteroids for ongoing monitoring.</p>
          </div>
          <div class="tracked-list" id="trackedList"></div>
        </section>
      </div>
    </section>

    <section class="status" id="statusPanel">
      <div class="status-card">
        <h3>Fetching live data...</h3>
        <p>Waiting for your local server at <span>http://localhost:5000/api/asteroids</span></p>
      </div>
    </section>
  </div>

  <div class="modal" id="simulationModal" role="dialog" aria-modal="true" aria-labelledby="simulationTitle">
    <div class="modal-card">
      <div class="modal-header">
        <div>
          <p class="eyebrow">IATRA / Visual</p>
          <h2 id="simulationTitle">Solar System + Asteroid</h2>
        </div>
        <button class="close-button" id="closeSimulation" type="button" aria-label="Close simulation">Close</button>
      </div>
      <div class="modal-body">
        <canvas id="asteroidCanvas" aria-label="3D asteroid simulation"></canvas>
        <p class="modal-hint">Drag to rotate. Scroll to zoom. Planets orbit the sun in real time.</p>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
  <script src="script.js"></script>
</body>

</html>